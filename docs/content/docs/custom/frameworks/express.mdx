---
title: "Express"
description: Build a self-hosted Hot Updater server with Express framework.
icon: express
---

## Installation

Install Express and required dependencies.

```package-install
npm install express @types/express --save-dev
```

## Setup

Make sure you've set up your database adapter first (see [Database Adapters](../database/drizzle)).

Import the Hot Updater instance and mount it to your Express app:

```typescript
import express from "express";
import { toNodeHandler } from "@hot-updater/server/node";
import { hotUpdater } from "./hotUpdater"; // [!code ++]

const app = express();

app.all("/hot-updater/*", toNodeHandler(hotUpdater)); // [!code ++]

app.listen(3000);
```

## API Endpoints

The server automatically creates these endpoints:

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/hot-updater/version` | Get server version |
| GET | `/hot-updater/fingerprint/:platform/:fingerprintHash/:channel/:minBundleId/:bundleId` | Check for updates by fingerprint |
| GET | `/hot-updater/app-version/:platform/:version/:channel/:minBundleId/:bundleId` | Check for updates by app version |
| GET | `/hot-updater/api/bundles` | List bundles (query: channel, platform, limit, offset) |
| GET | `/hot-updater/api/bundles/:id` | Get bundle by ID |
| POST | `/hot-updater/api/bundles` | Create or update bundles |
| DELETE | `/hot-updater/api/bundles/:id` | Delete bundle |
| GET | `/hot-updater/api/bundles/channels` | List all channels |

## Security

The Hot Updater handler does not include built-in authentication. Protect admin endpoints at the framework level.

### Protecting Admin Endpoints

Update endpoints are public for React Native clients. Bundle management endpoints (`/api/*`) require protection.

```typescript
import express from "express";
import { toNodeHandler } from "@hot-updater/server/node";
import { hotUpdater } from "./hotUpdater";

const app = express();
const handler = toNodeHandler(hotUpdater);

// Auth middleware // [!code ++]
const authMiddleware = (req, res, next) => { // [!code ++]
  const token = req.headers.authorization?.split(" ")[1]; // [!code ++]
  if (token !== process.env.API_KEY) { // [!code ++]
    return res.status(401).json({ error: "Unauthorized" }); // [!code ++]
  } // [!code ++]
  next(); // [!code ++]
}; // [!code ++]

// Protect /api/* endpoints // [!code ++]
app.use("/hot-updater/api", authMiddleware); // [!code ++]

app.all("/hot-updater/*", handler);

app.listen(3000);
```

Set your API key in environment variables:

```bash
API_KEY=your-secret-api-key
```

## React Native Setup

Configure your React Native app to connect to this server. Use `getUpdateSource` with your server URL.

```typescript title="App.tsx"
import { HotUpdater } from '@hot-updater/react-native';
import { getUpdateSource } from '@hot-updater/react-native';

export default HotUpdater.wrap({
  source: getUpdateSource('http://localhost:3000/hot-updater', { // [!code ++]
    updateStrategy: 'appVersion', // or "fingerprint" // [!code ++]
  }), // [!code ++]
  fallbackComponent: ({ progress, status }) => (
    // ... Custom loading UI
  ),
  onError: error => {
    // ... Error handling
  },
})(App);
```
