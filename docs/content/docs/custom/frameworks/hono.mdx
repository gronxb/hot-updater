---
title: "Hono"
description: Build a self-hosted Hot Updater server with Hono framework.
icon: hono
---

## Installation

Install Hono.

```package-install
npm install hono --save-dev
```

## Setup

Make sure you've set up your database adapter first (see [Database Adapters](../database/drizzle)).

Import the Hot Updater instance and mount it to your Hono app:

```typescript
import { Hono } from "hono";
import { hotUpdater } from "./hotUpdater"; // [!code ++]

const app = new Hono();

app.on(["POST", "GET", "DELETE"], "/hot-updater/*", async (c) => { // [!code ++]
  return hotUpdater.handler(c.req.raw); // [!code ++]
}); // [!code ++]

export default app;
```

## API Endpoints

The server automatically creates these endpoints:

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/hot-updater/fingerprint/:platform/:fingerprintHash/:channel/:minBundleId/:bundleId` | Check for updates by fingerprint |
| GET | `/hot-updater/app-version/:platform/:version/:channel/:minBundleId/:bundleId` | Check for updates by app version |
| GET | `/hot-updater/api/bundles` | List bundles (query: channel, platform, limit, offset) |
| GET | `/hot-updater/api/bundles/:id` | Get bundle by ID |
| POST | `/hot-updater/api/bundles` | Create or update bundles |
| DELETE | `/hot-updater/api/bundles/:id` | Delete bundle |
| GET | `/hot-updater/api/bundles/channels` | List all channels |

## Security

The Hot Updater handler does not include built-in authentication. Protect admin endpoints at the framework level.

### Protecting Admin Endpoints

Update endpoints are public for React Native clients. Bundle management endpoints (`/api/*`) require protection.

```typescript
import { Hono } from "hono";
import { bearerAuth } from "hono/bearer-auth"; // [!code ++]
import { hotUpdater } from "./hotUpdater";

const app = new Hono();

// Protect /api/* endpoints // [!code ++]
app.use("/hot-updater/api/*", bearerAuth({ token: process.env.API_KEY! })); // [!code ++]

app.on(["GET", "POST", "DELETE"], "/hot-updater/*", (c) => {
  return hotUpdater.handler(c.req.raw);
});

export default app;
```

Set your API key in environment variables:

```bash
API_KEY=your-secret-api-key
```

## React Native Setup

Configure your React Native app to connect to this server. Use `getUpdateSource` with your server URL.

```typescript title="App.tsx"
import { HotUpdater } from '@hot-updater/react-native';
import { getUpdateSource } from '@hot-updater/react-native';

export default HotUpdater.wrap({
  source: getUpdateSource('http://localhost:3000/hot-updater', { // [!code ++]
    updateStrategy: 'appVersion', // or "fingerprint" // [!code ++]
  }), // [!code ++]
  fallbackComponent: ({ progress, status }) => (
    // ... Custom loading UI
  ),
  onError: error => {
    // ... Error handling
  },
})(App);
```
